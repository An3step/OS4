# Inter-Process Communication via Shared File

## Постановка задачи

Программа реализует передачу сообщений между процессами через общий бинарный файл, организованный как кольцевая очередь (FIFO).

### Компоненты системы

**Процесс Receiver**:
1. Создает/открывает бинарный файл для сообщений
2. Запускает процессы Sender
3. Управляет очередью сообщений
4. Читает сообщения из файла по запросу
5. Завершает работу по команде

**Процесс Sender**:
1. Подключается к существующему файлу сообщений
2. Отправляет сигнал готовности
3. Записывает сообщения в файл по команде
4. Завершает работу по команде

## Упрощенная версия (1 Receiver + 1 Sender)

### Особенности реализации
- Одновременно передается только одно сообщение
- Используется бинарный файл фиксированного размера
- Максимальная длина сообщения - 20 символов

## Используемые инструменты

### Система сборки
- **CMake** (минимальная версия 3.10)
- Поддержка межпроцессного взаимодействия

### Тестирование
- **Google Test (gtest)** для модульного тестирования
- Тестовые сценарии:
  - Создание/открытие файла сообщений
  - Корректность передачи одного сообщения
  - Сигнализация между процессами
  - Обработка граничных случаев

### Компилятор
- Требуется поддержка C++17 или новее
- Необходима поддержка файловых операций

### Платформа
- Кроссплатформенное решение (использует стандартные файловые операции)
- Для синхронизации могут использоваться:
  - На Windows: WinAPI мьютексы/события
  - На Linux: POSIX семафоры

## Сборка и запуск

1. Соберите проект:
```bash
mkdir build && cd build
cmake .. && cmake --build .
```

2. Запустите Receiver:
```bash
./receiver message.bin
```

3. В отдельном терминале запустите Sender:
```bash
./sender message.bin
```

## Структура проекта

```
ipc_file/
├── CMakeLists.txt          # Основная конфигурация
├── include/
│   ├── message_queue.h     # Работа с очередью сообщений
│   ├── receiver.h          # Интерфейс Receiver
│   └── sender.h           # Интерфейс Sender
├── src/
│   ├── main_receiver.cpp   # Точка входа Receiver
│   ├── main_sender.cpp     # Точка входа Sender
│   ├── message_queue.cpp   # Реализация очереди
│   ├── receiver.cpp        # Реализация Receiver
│   └── sender.cpp         # Реализация Sender
├── test/
│   ├── test_queue.cpp      # Тесты очереди
│   └── test_ipc.cpp       # Интеграционные тесты
└── README.md              # Этот файл
```

## Формат бинарного файла

Для упрощенной версии:
```cpp
struct Message {
    char text[20];      // Текст сообщения
    bool available;     // Флаг доступности
};
```

## Алгоритм работы

1. Receiver создает файл и ожидает готовности Sender
2. Sender открывает файл и сигнализирует о готовности
3. Пользователь вводит сообщение в Sender
4. Sender записывает сообщение в файл
5. Receiver читает сообщение по запросу
6. Процессы синхронизируются через флаги в файле

## Особенности реализации

1. **Синхронизация**:
   - Используются атомарные операции с флагами
   - Для ожидания новых сообщений применяется проверка с задержкой

2. **Обработка ошибок**:
   - Проверка размера сообщения
   - Обработка ошибок файловых операций
   - Контроль состояния очереди

3. **Расширяемость**:
   - Структура проекта позволяет легко добавить:
     - Поддержку нескольких Sender
     - Настоящую кольцевую очередь
     - Улучшенные механизмы синхронизации
